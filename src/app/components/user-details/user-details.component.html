<div class="user-details">
    <form [formGroup]="userFormGroup">
        <div>
            <label for="username">{{'username'|translate}}:</label><br>
            <input type="text" formControlName="username">
        </div>
        <div>
            <label for="first_name">{{'first_name' | translate}}:</label><br>
            <input type="text" formControlName="first_name">
        </div>
        <div>
            <label for="last_name">{{'last_name' | translate}}:</label><br>
            <input type="text" formControlName="last_name">
        </div>
        <div>
            <label for="Roles">
                {{'roles' | translate}}: <br>
                    @for (role of user?.roles; track role) {
                    <ng-container formArrayName="roles">
                        <div class="role" >
                            <app-remove-button text="X" [keyToRemove]="role._id" (removeKey)="removeRole($event)" [disabled]="role.role_name==='User' || !userIsAdmin"></app-remove-button>
                            <app-role [role]="role"></app-role>
                        </div>
                    </ng-container>
                }
            </label><br>
            @if (user && userIsAdmin) {
                @if (unusedRoles && unusedRoles.length > 0) {
                    <div [formGroup]="addRoleFormGroup">
                        <label>{{'add_role' | translate}}: </label>
                        <select formControlName="add_role" (change)="addRole()">
                            @for (role of unusedRoles; track role) {
                            <option [value]="role._id">
                                {{role.role_name.toLowerCase() | translate}}
                            </option>   
                            }
                        </select>
                    </div>
                }
                <div class="submit-button">
                    <button (click)="updateUser()">{{'save' | translate}}</button>
                </div>
            }
        </div>
    </form>
</div>